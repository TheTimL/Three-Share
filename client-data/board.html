<!DOCTYPE html>
<html lang="{{language}}">

<head>
	<meta charset="utf-8" />
	<title>{{board}} | WBO | {{translate translations 'Collaborative whiteboard'}}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" type="text/css" href="board.css" />
	<script src="/socket.io/socket.io.js"></script>
	<meta name="description"
		content="{{translate translations 'A free and opensource online collaborative drawing tool. Sketch new ideas together on WBO !'}}'" />
	<meta name="keywords"
		content="{{translate translations 'Collaborative whiteboard'}},online,draw,paint,shared,realtime,wbo,whitebophir" />
	<link rel="apple-touch-icon" href="/favicon.svg">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" />
	<meta property="og:title" content="{{board}} board on WBO" />
	<meta property="og:url" content="{{baseUrl}}/boards/{{boardUriComponent}}" />
	<meta property="og:image" content="{{baseUrl}}/preview/{{boardUriComponent}}" />
	<link rel="canonical" href="{{baseUrl}}/boards/{{boardUriComponent}}?lang={{language}}" />
	{{#languages}}
	<link rel="alternate" hreflang="{{.}}" href="{{../baseUrl}}/boards/{{../boardUriComponent}}?lang={{.}}" />
	{{/languages}}
</head>

<body>
	<div class="row">
		<div class="column" id="board">
			<svg id="canvas" version="1.1" style="width:1000px; height:1500px" xmlns="http://www.w3.org/2000/svg">
			<defs id="defs"></defs>
			</svg>
		</div>
		<div class="column" width=1000px style="background-color:#bbb;">
			<p>
			Google Docs API Quickstart
			</p>
			<!--Add buttons to initiate auth sequence and sign out-->
			<button id="authorize_button" style="display: none;">Authorize</button>
			<button id="signout_button" style="display: none;">Sign Out</button>
			<pre id="content"></pre>
		
			<script type="text/javascript">
			// Client ID and API key from the Developer Console
			var CLIENT_ID = '199752243465-d2k9lmg4mr5aipdqjn3qrhk652vslvmv.apps.googleusercontent.com'
			// var CLIENT_ID = '707611556695-515jlpblpkdintu11q7up2pofcquo9hd.apps.googleusercontent.com'
			var API_KEY = 'AIzaSyA6UtsiPYULM61UDCUJ4EuGgx_5fXP_VfQ'
			// var API_KEY = 'AIzaSyCdMjNBFLKu0DLZcCfJiRO7ZYdgOBwK1a4';
		
			// Array of API discovery doc URLs for APIs used by the quickstart
			var DISCOVERY_DOCS = ['https://docs.googleapis.com/$discovery/rest?version=v1'];
		
			// Authorization scopes required by the API; multiple scopes can be
			// included, separated by spaces.
			var SCOPES = "https://www.googleapis.com/auth/documents.readonly";
		
			var authorizeButton = document.getElementById('authorize_button');
			var signoutButton = document.getElementById('signout_button');
		
			/**
			 *  On load, called to load the auth2 library and API client library.
			 */
			function handleClientLoad() {
				gapi.load('client:auth2', initClient);
			}
		
			/**
			 *  Initializes the API client library and sets up sign-in state
			 *  listeners.
			 */
			function initClient() {
				gapi.client.init({
				apiKey: API_KEY,
				clientId: CLIENT_ID,
				discoveryDocs: DISCOVERY_DOCS,
				scope: SCOPES
				}).then(function() {
				// Listen for sign-in state changes.
				gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
		
				// Handle the initial sign-in state.
				updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
				authorizeButton.onclick = handleAuthClick;
				signoutButton.onclick = handleSignoutClick;
				});
			}
		
			/**
			 *  Called when the signed in status changes, to update the UI
			 *  appropriately. After a sign-in, the API is called.
			 */
			function updateSigninStatus(isSignedIn) {
				if (isSignedIn) {
				authorizeButton.style.display = 'none';
				signoutButton.style.display = 'block';
				printDocTitle();
				} else {
				authorizeButton.style.display = 'block';
				signoutButton.style.display = 'none';
				}
			}
		
			/**
			 *  Sign in the user upon button click.
			 */
			function handleAuthClick(event) {
				gapi.auth2.getAuthInstance().signIn();
			}
		
			/**
			 *  Sign out the user upon button click.
			 */
			function handleSignoutClick(event) {
				gapi.auth2.getAuthInstance().signOut();
			}
		
			/**
			 * Append a pre element to the body containing the given message
			 * as its text node. Used to display the results of the API call.
			 *
			 * @param {string} message Text to be placed in pre element.
			 */
			function appendPre(message) {
				var pre = document.getElementById('content');
				var textContent = document.createTextNode(message + '\n');
				pre.appendChild(textContent);
			}
		
			/**
			 * Prints the title of a sample doc:
			 * https://docs.google.com/document/d/195j9eDD3ccgjQRttHhJPymLJUCOUjs-jmwTrekvdjFE/edit
			 */
			function printDocTitle() {
				gapi.client.docs.documents.get({
				documentId: '195j9eDD3ccgjQRttHhJPymLJUCOUjs-jmwTrekvdjFE'
			}).then(function(response) {
				var doc = response.result;
				var title = doc.title;
				appendPre('Document "' + title + '" successfully found.\n');
			}, function(response) {
				appendPre('Error: ' + response.result.error.message);
			});
			}
			</script>
			<script async="" defer="" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()" src="https://apis.google.com/js/api.js"></script>

			<!-- <h2>Text Editor</h2>
			<textarea rows="80" cols="100">This is the local text editor; Sharing feature will be implemented later
			</textarea> -->
		</div>
	</div>

	<div id="loadingMessage">{{translate translations 'Loading'}}</div>

	<div id="menu">
		<div id="menuItems">
			<ul id="tools" class="tools">
				<li class="tool"><span class="tool-icon"></span><span class="tool-name"></span></li>
			</ul>

			<ul class="tools" id="settings">
				<li class="tool">
					<span class="tool-icon">
						<input type="color" id="chooseColor" value="#1913B0" />
					</span>
					<label class="tool-name" for="chooseColor">{{translate translations 'Color'}}</label>
				</li>
				<li class="tool">
					<span class="tool-icon">
						<svg viewBox="-60 -60 120 120">
							<circle id="sizeIndicator" cx=0 cy=0 r=10 /></svg>
					</span>
					<label class="tool-name slider" for="chooseSize">
						<span>{{translate translations 'Size'}}</span>
						<input type="range" id="chooseSize" value="10" min="1" max="50" step="1" class="rangeChooser" />
					</label>
				</li>
				<li class="tool">
					<span class="tool-icon">
						<svg viewBox="0 0 12 12">
							<pattern id="opacityPattern" x="0" y="0" width="4" height="4" patternUnits="userSpaceOnUse">
								<rect x=0 y=0 width=2 height=2 fill=black />
								<rect x=2 y=2 width=2 height=2 fill=black />
								<rect x=2 y=0 width=2 height=2 fill=white />
								<rect x=0 y=2 width=2 height=2 fill=white />
							</pattern>
							<rect id="opacityIndicator" rx=1 width="100%" height="100%" fill="url(#opacityPattern)" />
						</svg>
					</span>
					<label class="tool-name slider" for="chooseOpacity">
						<span>{{translate translations 'Opacity'}}</span>
						<input type="range" id="chooseOpacity" value="1" min="0.2" max="1" step="0.1"
							class="rangeChooser" />
					</label>
				</li>
			</ul>
		</div>
	</div>


	<script type="application/json" id="translations">{{{json translations}}}</script>
	<script src="js/path-data-polyfill.js"></script>
	<script src="js/minitpl.js"></script>
	<script src="js/board.js"></script>
	<script src="tools/pencil/pencil.js"></script>
	<script src="tools/line/line.js"></script>
	<script src="tools/rect/rect.js"></script>
	<script src="tools/text/text.js"></script>
	<script src="tools/eraser/eraser.js"></script>
	<script src="tools/hand/hand.js"></script>
	<script src="tools/zoom/zoom.js"></script>
	<script src="/js/canvascolor/canvascolor.min.js"></script>
</body>

</html>